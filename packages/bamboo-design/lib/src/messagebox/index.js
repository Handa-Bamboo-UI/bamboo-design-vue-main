"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const g=require("./messagebox.vue.js"),l=require("vue"),x=require("./props.js");let m=0,v={...x.DEFAULT_CONFIG};function i(e,t={}){return new Promise((n,r)=>{const o=l.ref(!1),f=l.reactive({...t,type:e,visible:o.value,onConfirm:c=>{n({action:"confirm",value:c}),o.value=!1},onCancel:()=>{r({action:"cancel"}),o.value=!1},onClose:()=>{r({action:"close"}),o.value=!1},"onUpdate:visible":c=>{o.value=c,c||setTimeout(()=>b(),300)},zIndex:1e3+m}),a=document.createElement("div");document.body.appendChild(a),m++;let d=l.createVNode(g.default,f);l.render(d,a),l.watchEffect(()=>{d=l.createVNode(g.default,{...f,visible:o.value}),l.render(d,a)});const b=()=>{l.render(null,a),document.body.removeChild(a),m--};l.nextTick(()=>{o.value=!0})})}const s={info(e={}){return i("info",e)},alert(e={}){return i("alert",e)},prompt(e={}){return i("prompt",e)},error(e={}){return i("error",e)},setDefaults:e=>{v={...v,...e}},closeAll:()=>{document.querySelectorAll('[id^="message-box-"]').forEach(e=>{const t=e._vnode;t?.component&&t.component.emit("update:visible",!1)})},message:u},p={install:e=>{e.component("bm-message",g.default),e.config.globalProperties.$alert=s.alert,e.config.globalProperties.$error=s.error,e.config.globalProperties.$prompt=s.prompt,e.config.globalProperties.$message=u,e.provide("messageBox",s),e.provide("message",u)}};function u(e,t){let n="alert",r={};if(t===void 0)typeof e=="string"?r={message:e}:(n="alert",r=e);else{const o=e;["alert","error","prompt","info"].includes(o)?(n=o,typeof t=="string"?r={message:t}:r=t):(r={message:o},typeof t=="object"&&t!==null&&(r={...r,...t}))}switch(n){case"alert":return s.alert(r);case"error":return s.error(r);case"prompt":return s.prompt(r);case"info":return s.info(r);default:return s.alert(r)}}exports.MessageBox=s;exports.MessageBoxPlugin=p;exports.createMessageBox=i;exports.default=p;exports.message=u;
